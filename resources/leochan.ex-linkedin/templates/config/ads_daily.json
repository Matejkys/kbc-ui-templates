{
    "name": "Ads Analytics - Last 7 days",
    "description": "Extracting active campaigns ad analytics for the last 7 days", 
    "data": {
        "incrementalOutput": true,
        "mappings": {
            "campaign_analytics": {
                "pivot": {
                    "type": "column",
                    "mapping": {
                        "destination": "pivot",
                        "primaryKey": true
                    }
                },
                "pivotValue": {
                    "type": "column",
                    "mapping": {
                        "destination": "pivotValue",
                        "primaryKey": true
                    }
                },
                "dateRange.start.year": {
                    "type": "column",
                    "mapping": {
                        "destination": "start_year",
                        "primaryKey": true
                    }
                },
                "dateRange.start.month": {
                    "type": "column",
                    "mapping": {
                        "destination": "start_month",
                        "primaryKey": true
                    }
                },
                "dateRange.start.day": {
                    "type": "column",
                    "mapping": {
                        "destination": "start_day",
                        "primaryKey": true
                    }
                },
                "dateRange.end.year": {
                    "type": "column",
                    "mapping": {
                        "destination": "end_year",
                        "primaryKey": true
                    }
                },
                "dateRange.end.month": {
                    "type": "column",
                    "mapping": {
                        "destination": "end_month",
                        "primaryKey": true
                    }
                },
                "dateRange.end.day": {
                    "type": "column",
                    "mapping": {
                        "destination": "end_day",
                        "primaryKey": true
                    }
                },
                "actionClicks": {
                    "type": "column",
                    "mapping": {
                        "destination": "actionClicks"
                    }
                },
                "adUnitClicks": {
                    "type": "column",
                    "mapping": {
                        "destination": "adUnitClicks"
                    }
                },
                "clicks": {
                    "type": "column",
                    "mapping": {
                        "destination": "clicks"
                    }
                },
                "comments": {
                    "type": "column",
                    "mapping": {
                        "destination": "comments"
                    }
                },
                "companyPageClicks": {
                    "type": "column",
                    "mapping": {
                        "destination": "companyPageClicks"
                    }
                },
                "conversionValueInLocalCurrency": {
                    "type": "column",
                    "mapping": {
                        "destination": "conversionValueInLocalCurrency"
                    }
                },
                "costInLocalCurrency": {
                    "type": "column",
                    "mapping": {
                        "destination": "costInLocalCurrency"
                    }
                },
                "costInUsd": {
                    "type": "column",
                    "mapping": {
                        "destination": "costInUsd"
                    }
                },
                "externalWebsiteConversions": {
                    "type": "column",
                    "mapping": {
                        "destination": "externalWebsiteConversions"
                    }
                },
                "externalWebsitePostClickConversions": {
                    "type": "column",
                    "mapping": {
                        "destination": "externalWebsitePostClickConversions"
                    }
                },
                "externalWebsitePostViewConversions": {
                    "type": "column",
                    "mapping": {
                        "destination": "externalWebsitePostViewConversions"
                    }
                },
                "follows": {
                    "type": "column",
                    "mapping": {
                        "destination": "follows"
                    }
                },
                "fullScreenPlays": {
                    "type": "column",
                    "mapping": {
                        "destination": "fullScreenPlays"
                    }
                },
                "impressions": {
                    "type": "column",
                    "mapping": {
                        "destination": "impressions"
                    }
                },
                "landingPageClicks": {
                    "type": "column",
                    "mapping": {
                        "destination": "landingPageClicks"
                    }
                },
                "leadGenerationMailContactInfoShares": {
                    "type": "column",
                    "mapping": {
                        "destination": "leadGenerationMailContactInfoShares"
                    }
                },
                "leadGenerationMailInterestedClicks": {
                    "type": "column",
                    "mapping": {
                        "destination": "leadGenerationMailInterestedClicks"
                    }
                },
                "likes": {
                    "type": "column",
                    "mapping": {
                        "destination": "likes"
                    }
                },
                "oneClickLeadFormOpens": {
                    "type": "column",
                    "mapping": {
                        "destination": "oneClickLeadFormOpens"
                    }
                },
                "oneClickLeads": {
                    "type": "column",
                    "mapping": {
                        "destination": "oneClickLeads"
                    }
                },
                "opens": {
                    "type": "column",
                    "mapping": {
                        "destination": "opens"
                    }
                },
                "otherEngagements": {
                    "type": "column",
                    "mapping": {
                        "destination": "otherEngagements"
                    }
                },
                "reactions": {
                    "type": "column",
                    "mapping": {
                        "destination": "reactions"
                    }
                },
                "sends": {
                    "type": "column",
                    "mapping": {
                        "destination": "sends"
                    }
                },
                "shares": {
                    "type": "column",
                    "mapping": {
                        "destination": "shares"
                    }
                },
                "textUrlClicks": {
                    "type": "column",
                    "mapping": {
                        "destination": "textUrlClicks"
                    }
                },
                "totalEngagements": {
                    "type": "column",
                    "mapping": {
                        "destination": "totalEngagements"
                    }
                },
                "videoCompletions": {
                    "type": "column",
                    "mapping": {
                        "destination": "videoCompletions"
                    }
                },
                "videoFirstQuartileCompletions": {
                    "type": "column",
                    "mapping": {
                        "destination": "videoFirstQuartileCompletions"
                    }
                },
                "videoMidpointCompletions": {
                    "type": "column",
                    "mapping": {
                        "destination": "videoMidpointCompletions"
                    }
                },
                "videoStarts": {
                    "type": "column",
                    "mapping": {
                        "destination": "videoStarts"
                    }
                },
                "videoThirdQuartileCompletions": {
                    "type": "column",
                    "mapping": {
                        "destination": "videoThirdQuartileCompletions"
                    }
                },
                "videoViews": {
                    "type": "column",
                    "mapping": {
                        "destination": "videoViews"
                    }
                },
                "viralClicks": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralClicks"
                    }
                },
                "viralComments": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralComments"
                    }
                },
                "viralCommentLikes": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralCommentLikes"
                    }
                },
                "viralCompanyPageClicks": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralCompanyPageClicks"
                    }
                },
                "viralExternalWebsiteConversions": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralExternalWebsiteConversions"
                    }
                },
                "viralExternalWebsitePostClickConversions": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralExternalWebsitePostClickConversions"
                    }
                },
                "viralExternalWebsitePostViewConversions": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralExternalWebsitePostViewConversions"
                    }
                },
                "viralFollows": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralFollows"
                    }
                },
                "viralFullScreenPlays": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralFullScreenPlays"
                    }
                },
                "viralImpressions": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralImpressions"
                    }
                },
                "viralLandingPageClicks": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralLandingPageClicks"
                    }
                },
                "viralLikes": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralLikes"
                    }
                },
                "viralOneClickLeadFormOpens": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralOneClickLeadFormOpens"
                    }
                },
                "viralOneClickLeads": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralOneClickLeads"
                    }
                },
                "viralOtherEngagements": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralOtherEngagements"
                    }
                },
                "viralReactions": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralReactions"
                    }
                },
                "viralShares": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralShares"
                    }
                },
                "viralTotalEngagements": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralTotalEngagements"
                    }
                },
                "viralVideoCompletions": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralVideoCompletions"
                    }
                },
                "viralVideoFirstQuartileCompletions": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralVideoFirstQuartileCompletions"
                    }
                },
                "viralVideoMidpointCompletions": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralVideoMidpointCompletions"
                    }
                },
                "viralVideoStarts": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralVideoStarts"
                    }
                },
                "viralVideoThirdQuartileCompletions": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralVideoThirdQuartileCompletions"
                    }
                },
                "viralVideoViews": {
                    "type": "column",
                    "mapping": {
                        "destination": "viralVideoViews"
                    }
                }
            },
            "campaigns": {
                "targeting.includedTargetingFacets.locations.0": {
                    "type": "column",
                    "mapping": {
                        "destination": "targeting_locations"
                    }
                },
                "changeAuditStamps.created.time": {
                    "type": "column",
                    "mapping": {
                        "destination": "created"
                    }
                },
                "audienceExpansionEnabled": {
                    "type": "column",
                    "mapping": {
                        "destination": "audienceExpansionEnabled"
                    }
                },
                "costType": {
                    "type": "column",
                    "mapping": {
                        "destination": "costType"
                    }
                },
                "dailyBudget.amount": {
                    "type": "column",
                    "mapping": {
                        "destination": "dailyBudget"
                    }
                },
                "changeAuditStamps.lastModified.time": {
                    "type": "column",
                    "mapping": {
                        "destination": "lastModified"
                    }
                },
                "name": {
                    "type": "column",
                    "mapping": {
                        "destination": "name"
                    }
                },
                "locale.language": {
                    "type": "column",
                    "mapping": {
                        "destination": "language"
                    }
                },
                "account": {
                    "type": "column",
                    "mapping": {
                        "destination": "account"
                    }
                },
                "dailyBudget.currencyCode": {
                    "type": "column",
                    "mapping": {
                        "destination": "dailyBudget_currency"
                    }
                },
                "servingStatuses.0": {
                    "type": "column",
                    "mapping": {
                        "destination": "servingStatuses"
                    }
                },
                "status": {
                    "type": "column",
                    "mapping": {
                        "destination": "status"
                    }
                },
                "objectiveType": {
                    "type": "column",
                    "mapping": {
                        "destination": "objectiveType"
                    }
                },
                "runSchedule.start": {
                    "type": "column",
                    "mapping": {
                        "destination": "runSchedule"
                    }
                },
                "offsiteDeliveryEnabled": {
                    "type": "column",
                    "mapping": {
                        "destination": "offsiteDeliveryEnabled"
                    }
                },
                "version.versionTag": {
                    "type": "column",
                    "mapping": {
                        "destination": "version"
                    }
                },
                "type": {
                    "type": "column",
                    "mapping": {
                        "destination": "type"
                    }
                },
                "id": {
                    "type": "column",
                    "mapping": {
                        "destination": "id",
                        "primaryKey": true
                    }
                },
                "creativeSelection": {
                    "type": "column",
                    "mapping": {
                        "destination": "creativeSelection"
                    }
                }
            }
        },
        "jobs": [
            {
                "endpoint": "adCampaignsV2",
                "params": {
                    "q": "search",
                    "search.status.values[0]": "ACTIVE"
                },
                "dataField": "elements",
                "dataType": "campaigns",
                "scroller": "campaign_scroller",
                "children": [
                    {
                        "endpoint": "adAnalyticsV2?campaigns[0]=urn:li:sponsoredCampaign:{campaign_id}",
                        "placeholders": {
                            "campaign_id": "id"
                        },
                        "dataField": "elements",
                        "dataType": "campaign_analytics",
                        "params": {
                            "q": "analytics",
                            "timeGranularity": {
                                "attr": "timeGranularity"
                            },
                            "pivot": {
                                "attr": "pivot"
                            },
                            "dateRange.start.year": {
                                "function": "date",
                                "args": [
                                    "Y",
                                    {
                                        "function": "strtotime",
                                        "args": [
                                            "-7 days"
                                        ]
                                    }
                                ]
                            },
                            "dateRange.start.day": {
                                "function": "date",
                                "args": [
                                    "d",
                                    {
                                        "function": "strtotime",
                                        "args": [
                                            "-7 days"
                                        ]
                                    }
                                ]
                            },
                            "dateRange.start.month": {
                                "function": "date",
                                "args": [
                                    "m",
                                    {
                                        "function": "strtotime",
                                        "args": [
                                            "-7 days"
                                        ]
                                    }
                                ]
                            }
                        }
                    }
                ]
            }
        ]
    }
}