{
    "name": "Users and events (experimental)",
    "description": "Downloads all users and their events\n\nNote: this configuration may experience unexpected failures when downloading large volumes of events.",
    "data": {
        "jobs": [
            {
                "endpoint": "users/scroll",
                "scroller": "users",
                "dataType": "users",
                "children": [
                    {
                        "endpoint": "events?user_id={1:user_id}&type=user",
                        "dataType": "events",
                        "placeholders": {
                            "1:user_id": "user_id"
                        },
                        "recursionFilter": "user_id!=&email!="
                    }
                ]
            }
        ],
        "mappings": {
            "users": {
                "type": "type",
                "id": {
                    "mapping": {
                        "destination": "id",
                        "primaryKey": true
                    }
                },
                "created_at": "created_at",
                "signed_up_at": "signed_up_at",
                "updated_at": "updated_at",
                "email": "email",
                "phone": "phone",
                "user_id": "user_id",
                "last_request_at": "last_request_at",
                "session_count": "session_count",
                "unsubscribed_from_emails": "unsubscribed_from_emails",
                "marked_email_as_spam": "marked_email_as_spam",
                "has_hard_bounced": "has_hard_bounced",
                "user_agent_data": "user_agent_data",
                "last_seen_ip": "last_seen_ip",
                "pseudonym": "pseudonym",
                "anonymous": "anonymous",
                "name": "name",
                "location_data.city_name": "location_data_city_name",
                "location_data.continent_code": "location_data_continent_code",
                "location_data.country_code": "location_data_country_code",
                "location_data.country_name": "location_data_country_name",
                "location_data.latitude": "location_data_latitude",
                "location_data.longitude": "location_data_longitude",
                "location_data.postal_code": "location_data_postal_code",
                "location_data.region_name": "location_data_region_name",
                "location_data.timezone": "location_data_timezone",
                "avatar.image_url": "avatar_image_url",
                "tags.tags": {
                    "type": "table",
                    "destination": "users_tags",
                    "tableMapping": {
                        "type": "type",
                        "id": "id"
                    }
                },
                "segments.segments": {
                    "type": "table",
                    "destination": "users_segments",
                    "tableMapping": {
                        "type": "type",
                        "id": "id"
                    }
                },
                "companies.companies": {
                    "type": "table",
                    "destination": "users_companies",
                    "tableMapping": {
                        "type": "type",
                        "id": "id"
                    }
                },
                "social_profiles.social_profiles": {
                    "type": "table",
                    "destination": "users_social_profiles",
                    "tableMapping": {
                        "type": "type",
                        "id": "id",
                        "name": "name",
                        "username": "username",
                        "url": "url"
                    }
                },
                "custom_attributes": {
                    "forceType": true,
                    "mapping": {
                        "destination": "custom_attributes"
                    }
                }
            },
            "events": {
                "type": "type",
                "id": {
                    "mapping": {
                        "destination": "id",
                        "primaryKey": true
                    }
                },
                "created_at": "created_at",
                "event_name": "event_name",
                "user_id": "user_id",
                "email": "email",
                "intercom_user_id": "intercom_user_id",
                "metadata": {
                    "forceType": true,
                    "mapping": {
                        "destination": "metadata"
                    }
                }
            }
        }
    }
}
