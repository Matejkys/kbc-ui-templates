{
    "name":"Customers",
    "description":"Retrieve list of customers.",
    "data":{
      "incrementalOutput": true,
      "debug":true,
      "jobs":[
          {
              "endpoint":"customers/search",
              "dataType":"customers",
              "dataField":"items"
          }
      ],
      "mappings":{
          "customers":{
            "id":{
              "mapping":{
                "destination":"id",
                "primaryKey":true
              }
            },
            "group_id":{
              "type": "column",
              "mapping":{
                "destination":"group_id"
              }
            },
            "email":{
              "type": "column",
              "mapping":{
                "destination":"email"
              }
            },
            "firstname":{
              "type": "column",
              "mapping":{
                "destination":"firstname"
              }
            },
            "lastname":{
              "type": "column",
              "mapping":{
                "destination":"lastname"
              }
            },
            "store_id":{
              "type": "column",
              "mapping":{
                "destination":"store_id"
              }
            },
            "website_id":{
              "type": "column",
              "mapping":{
                "destination":"website_id"
              }
            },
            "addresses":{
              "type":"table",
              "destination":"customers-addresses",
              "tableMapping":{
                "id":{
                  "mapping":{
                    "destination":"id",
                    "primaryKey":true
                  }
                },
                "customer_id":{
                  "mapping":{
                    "destination":"customer_id",
                    "primaryKey":true 
                  }
                },
                "region.region_code":{
                  "type":"column",
                  "mapping":{"destination":"region_code"}
                },
                "region.region":{
                  "type":"column",
                  "mapping":{"destination":"region"}
                },
                "country_id":{
                  "type":"column",
                  "mapping":{"destination":"country_id"}
                },
                "street.0":{
                  "type":"column",
                  "mapping":{"destination":"primary_address"}
                },
                "street.1":{
                  "type":"column",
                  "mapping":{"destination":"secondary_address"}
                },
                "telephone":{
                  "type":"column",
                  "mapping":{"destination":"telephone"}
                },
                "postcode":{
                  "type":"column",
                  "mapping":{"destination":"postcode"}
                },
                "city":{
                  "type":"column",
                  "mapping":{"destination":"city"}
                },
                "firstname":{
                  "type":"column",
                  "mapping":{"destination":"firstname"}
                },
                "lastname":{
                  "type":"column",
                  "mapping":{"destination":"lastname"}
                },
                "default_shipping":{
                  "type":"column",
                  "mapping":{"destination":"default_shipping"}
                },
                "default_billing":{
                  "type":"column",
                  "mapping":{"destination":"default_billing"}
                }
              }
            }
          }
      }
    }
}